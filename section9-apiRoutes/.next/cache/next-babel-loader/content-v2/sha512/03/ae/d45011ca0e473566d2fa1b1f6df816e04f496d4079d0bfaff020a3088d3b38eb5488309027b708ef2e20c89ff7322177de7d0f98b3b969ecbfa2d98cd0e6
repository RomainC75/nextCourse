{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { getCommentsOnEvent, saveComment } from \"../../../dummy-data\";\n\nfunction handler(req, res) {\n  const {\n    eventId\n  } = req.query;\n  console.log('==> eventId : ', eventId, req.url, req.body);\n\n  if (req.method === \"POST\") {\n    const comment = saveComment(JSON.parse(req.body), eventId);\n    const id = new Date().toISOString();\n    return res.status(201).json({\n      message: \"comment saved\",\n      comment: _objectSpread(_objectSpread({}, comment), {}, {\n        id\n      })\n    });\n  }\n\n  const foundComments = getCommentsOnEvent(eventId);\n  res.status(200).json(foundComments);\n}\n\nexport default handler;","map":{"version":3,"sources":["/home/rom/Documents/dev/nextjs/tuto/section9-apiRoutes/pages/api/comment/[eventId].js"],"names":["getCommentsOnEvent","saveComment","handler","req","res","eventId","query","console","log","url","body","method","comment","JSON","parse","id","Date","toISOString","status","json","message","foundComments"],"mappings":";;;;;;AAAA,SAASA,kBAAT,EAA6BC,WAA7B,QAAgD,qBAAhD;;AAGA,SAASC,OAAT,CAAkBC,GAAlB,EAAsBC,GAAtB,EAA0B;AACtB,QAAM;AAACC,IAAAA;AAAD,MAAYF,GAAG,CAACG,KAAtB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BH,OAA9B,EAAuCF,GAAG,CAACM,GAA3C,EAAgDN,GAAG,CAACO,IAApD;;AAEA,MAAGP,GAAG,CAACQ,MAAJ,KAAa,MAAhB,EAAuB;AACnB,UAAMC,OAAO,GAAGX,WAAW,CAACY,IAAI,CAACC,KAAL,CAAWX,GAAG,CAACO,IAAf,CAAD,EAAsBL,OAAtB,CAA3B;AACA,UAAMU,EAAE,GAAG,IAAIC,IAAJ,GAAWC,WAAX,EAAX;AACA,WAAOb,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBC,MAAAA,OAAO,EAAE,eADe;AAExBR,MAAAA,OAAO,kCAAKA,OAAL;AAAaG,QAAAA;AAAb;AAFiB,KAArB,CAAP;AAIH;;AAED,QAAMM,aAAa,GAAGrB,kBAAkB,CAACK,OAAD,CAAxC;AACAD,EAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBE,aAArB;AACH;;AAED,eAAenB,OAAf","sourcesContent":["import { getCommentsOnEvent, saveComment } from \"../../../dummy-data\"\n\n\nfunction handler (req,res){\n    const {eventId} = req.query\n    console.log('==> eventId : ', eventId, req.url, req.body)\n    \n    if(req.method===\"POST\"){\n        const comment = saveComment(JSON.parse(req.body),eventId)\n        const id = new Date().toISOString()\n        return res.status(201).json({\n            message: \"comment saved\",\n            comment:{...comment,id}\n        })    \n    }\n    \n    const foundComments = getCommentsOnEvent(eventId)\n    res.status(200).json(foundComments)\n}\n\nexport default handler"]},"metadata":{},"sourceType":"module"}
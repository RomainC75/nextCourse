{"ast":null,"code":"import { mongoConnect, mongoEmailRegistrationHandler } from \"../../../helpers/mongodb\";\n\nasync function handle(req, res) {\n  try {\n    const client = await mongoConnect();\n  } catch (error) {}\n\n  console.log(req.body);\n\n  if (req.method === \"POST\") {\n    try {\n      const ans = await mongoEmailRegistrationHandler(client, \"registration\", req.body);\n      return res.status(201).json({\n        message: \"registered\",\n        email: ans\n      });\n    } catch (error) {\n      console.log('error ', error);\n    }\n  }\n\n  res.status(400).json({\n    message: \"expect a POST request\"\n  });\n}\n\nexport default handle;","map":{"version":3,"sources":["/home/rom/Documents/dev/nextjs/tuto/section9-apiRoutes/pages/api/registration/index.js"],"names":["mongoConnect","mongoEmailRegistrationHandler","handle","req","res","client","error","console","log","body","method","ans","status","json","message","email"],"mappings":"AAAA,SAAQA,YAAR,EAAsBC,6BAAtB,QAA0D,0BAA1D;;AAGA,eAAeC,MAAf,CAAsBC,GAAtB,EAA2BC,GAA3B,EAAgC;AAC5B,MAAI;AACA,UAAMC,MAAM,GAAG,MAAML,YAAY,EAAjC;AACH,GAFD,CAEE,OAAOM,KAAP,EAAc,CAEf;;AACHC,EAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACM,IAAhB;;AACA,MAAIN,GAAG,CAACO,MAAJ,KAAe,MAAnB,EAA2B;AACzB,QAAI;AACA,YAAMC,GAAG,GAAG,MAAMV,6BAA6B,CAACI,MAAD,EAAS,cAAT,EAAyBF,GAAG,CAACM,IAA7B,CAA/C;AACA,aAAOL,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC5BC,QAAAA,OAAO,EAAE,YADmB;AAE5BC,QAAAA,KAAK,EAAEJ;AAFqB,OAArB,CAAP;AAIH,KAND,CAME,OAAOL,KAAP,EAAc;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,KAAtB;AACH;AAEF;;AACDF,EAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAArB;AACD;;AAED,eAAeZ,MAAf","sourcesContent":["import {mongoConnect, mongoEmailRegistrationHandler} from \"../../../helpers/mongodb\";\n\n\nasync function handle(req, res) {\n    try {\n        const client = await mongoConnect()\n    } catch (error) {\n        \n    }\n  console.log(req.body);\n  if (req.method === \"POST\") {\n    try {\n        const ans = await mongoEmailRegistrationHandler(client, \"registration\", req.body)\n        return res.status(201).json({\n        message: \"registered\",\n        email: ans\n        });    \n    } catch (error) {\n        console.log('error ', error)\n    }\n    \n  }\n  res.status(400).json({ message: \"expect a POST request\" });\n}\n\nexport default handle;\n"]},"metadata":{},"sourceType":"module"}